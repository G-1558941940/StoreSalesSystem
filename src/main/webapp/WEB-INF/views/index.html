<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <script src="/js/jquery-3.4.1.js"></script>
    <script src="/js/template-web.js"></script>
    <style>
        #box{
            width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        #box table{
            margin: 0 auto;
        }
        .changeColor:nth-of-type(odd){
            background-color: #A2A4A1;
        }
    </style>
</head>
<body>
<div id="box">
    <div>
        <span>请选择商品分类</span>
        <select name="sortId" id="sort">
        </select>
    </div>
    <div>
        <table>
            <thead>
                <tr style="background-color: #A2A4A1">
                    <td>商品编号</td>
                    <td>商品名称</td>
                    <td>商品分类</td>
                    <td>产地</td>
                    <td>生产日期</td>
                    <td>单价（元）</td>
                    <td>购买数量</td>
                    <td>操作</td>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
</div>
<script type="text/html" id="sortsTemp">
    <option value="-1" selected>请选择...</option>
    {{each sorts sort}}
        <option value="{{sort.id}}">{{sort.name}}</option>
    {{/each}}
</script>

<script type="text/html" id="detailTemp">
    {{each details detail}}
        <tr class="changeColor">
            <td>{{detail.id}}</td>
            <td>{{detail.name}}</td>
            <td>{{detail.sortName}}</td>
            <td>{{detail.address}}</td>
            <td>{{detail.createDate}}</td>
            <td>{{detail.price}}</td>
            <td>{{detail.remaining}}</td>
            <td>
                <a href="">购买</a>
                <a href="">删除</a>
            </td>
        </tr>
    {{/each}}
</script>

<script>
    $(function () {
        $.getJSON("/getSortList",function (res) {
            let html = template("sortsTemp", {"sorts": res});
            $("#sort").html(html);
        });
        $.getJSON("/getDetailAll",function (res) {
            let html = template("detailTemp", {"details": res})
            $("tbody").html(html);
        })
    })
</script>
</body>
</html>